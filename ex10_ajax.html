<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <!-- vue3 ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë”© : CDN -->
    <script src="https://unpkg.com/vue@3"></script>
  </head>
  <body>
    <h2>AJAX ğŸ‘‰ğŸ» JSON Change</h2>
    <div id="app">
      <button @click="fetchData">AJAXë¡œ JSON ìë£Œ ì½ê¸°</button><br><br>
      <button @click="clearData">JSON ìë£Œ ì§€ìš°ê¸°</button>

      <div v-for="(post, index) in posts" :key="index">
        <h3>{{post.title}}</h3>
        <br>{{post.id}}<br/>
        <br>{{post.body}}<br/>
      </div>
    </div>

    <script>
      const { createApp } = Vue;

      createApp ({
        data() {
            return {
                posts:[] // ë‹´ê¸°
            }
        },
        methods: {
            fetchData() { // AJAX
                fetch('https://jsonplaceholder.typicode.com/posts') // ì´ ì‚¬ì´íŠ¸ì—ì„œ AJAX
                .then(response => { // Promise
                    if(!response.ok) {
                        throw new Error('AJAX ERROR'); // responseê°€ okê°€ ì•„ë‹ˆë©´ ì—ëŸ¬ë©”ì„¸ì§€ ë˜ì§€ê¸°
                    }
                    return response.json(); // okì´ë©´ jsoníƒ€ì…ì˜ ë¬¸ìì—´ë¡œ ë°”ê¿” ë¦¬í„´
                })
                .then(json => {
                    this.posts = json.slice(0, 10); // ê°€ì ¸ì˜¨ ë°ì´í„°ë¥¼ 10ê°œê¹Œì§€ë§Œ ìë¥´ê¸°
                })
                .catch(error => {
                    console.log('ì½ê¸° ì˜¤ë¥˜ : ', error);
                })
            },
            clearData() {
                this.posts = []; // ë¹„ìš°ê¸°
            }
        },
      }).mount('#app');
    </script>
  </body>
</html>
